SPAM DETECTOR using JAVA SPARK
=========================

A model created in Java Spark to classify mails as spam or not spam.
This project was meant to verify the compatibility of models between Pyspark and Java-Spark.
The models are saved in the directory `data/sparkmodel`

The related project in Pyspark is here: http://github.com/diegoami/DA_spamdetector_pyspark
 

## SET UP

Make sure you have Java 8 or higher installed and Maven

## COMPILE

Execute `mvn clean compile package`

## RUN locally

To create the model and export it to `data/sparkmodel`, execute the command

```
java -cp target/bootstrap-executable-1.0-SNAPSHOT.jar com.amicabile.spamclassifier.CreateModel

# /bin/sh ./create_model.sh
```
This model is the same generated by http://github.com/diegoami/DA_spamdetector_pyspark

To test it

```
java -cp target/bootstrap-executable-1.0-SNAPSHOT.jar com.amicabile.spamclassifier.TestModel

# /bin/sh ./test_model.sh
```

## EXECUTE IN DOCKER

YOUR_DATA_DIRECTORY is where you put the model files

Build the docker image

```
docker build -t spam_detector_javaspark . 
```

Create the model
```
docker run  -v <YOUR_DATA_DIRECTORY>:/opt/data spam_detector_javaspark /bin/sh -c "./create_model.sh"
```

test the model
```
docker run  -v <YOUR_DATA_DIRECTORY>:/opt/data spam_detector_javaspark /bin/sh -c "./test_model.sh"
```

## EXPECTED MODEL PERFORMANCE

Test PR and ROC : 0.8782117128454908, 0.9024385488801547                        

Overall PR and ROC : 0.9781629515801471, 0.9820789201711856

Confusion matrix : 
[[4820.,    5.],
 [  26.,  721.]]
